Lexed program:


fun int ( ) main ( ) = 
var int * arr = alloc ( 2 ) ; 
arr [ 0 ] = 5 ; 
arr [ 1 ] = 6 ; 
print ( arr [ 0 ] ) ; 
print ( arr [ 1 ] ) ; 
return 0 ; 
end 
 
Parsed program:

fun int() main() =
  var int* arr = alloc(2);
  arr[0] = 5;
  arr[1] = 6;
  print(arr[0]);
  print(arr[1]);
  return 0;
end

Checked program:

fun int() main() =
  var int* arr = alloc(2);
  *(arr + 0) = 5;
  *(arr + 1) = 6;
  print(*(arr + 0));
  print(*(arr + 1));
  return 0;
end

intr wildcardPtr() nullptr();
intr wildcardPtr(int) alloc();
intr int(wildcardPtr) free();
intr int() read();
intr int(int) print();
intr int() flush();
intr int(int) exit();

Compiled program:

0: spAdd 0
1: addr 4
2: call 0
3: exit
4: spAdd 1
5: local 0
6: push 2
7: addr 44
8: call 1
9: store
10: local 0
11: load
12: push 0
13: binOp 0
14: push 5
15: store
16: local 0
17: load
18: push 1
19: binOp 0
20: push 6
21: store
22: local 0
23: load
24: push 0
25: binOp 0
26: load
27: addr 50
28: call 1
29: pop
30: local 0
31: load
32: push 1
33: binOp 0
34: load
35: addr 50
36: call 1
37: pop
38: push 0
39: return
40: push 0
41: return
42: push 0
43: return
44: local -4
45: load
46: alloc
47: return
48: read
49: return
50: local -4
51: load
52: print
53: push 0
54: return
55: flush
56: push 0
57: return
58: local -4
59: load
60: exit
61: push 0
62: return

Program IO:

pc start: 2349452159184
sp start: 2349453099072

pc: 0
bp: 0
sp: 0
stack:

instr: spAdd 0

pc: 1
bp: 0
sp: 0
stack:

instr: addr 4

pc: 2
bp: 0
sp: 1
stack:
2349452159248

instr: call 0

pc: 4
bp: 3
sp: 3
stack:
2349452159232
2349453099072
2349453099072

instr: spAdd 1

pc: 5
bp: 3
sp: 4
stack:
2349452159232
2349453099072
2349453099072
0

instr: local 0

pc: 6
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
0
2349453099096

instr: push 2

pc: 7
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
0
2349453099096
2

instr: addr 44

pc: 8
bp: 3
sp: 7
stack:
2349452159232
2349453099072
2349453099072
0
2349453099096
2
2349452159888

instr: call 1

pc: 44
bp: 9
sp: 9
stack:
2349452159232
2349453099072
2349453099072
0
2349453099096
2
2349452159328
2349453099096
2349453099112

instr: local -4

pc: 45
bp: 9
sp: 10
stack:
2349452159232
2349453099072
2349453099072
0
2349453099096
2
2349452159328
2349453099096
2349453099112
2349453099112

instr: load

pc: 46
bp: 9
sp: 10
stack:
2349452159232
2349453099072
2349453099072
0
2349453099096
2
2349452159328
2349453099096
2349453099112
2

instr: alloc

pc: 47
bp: 9
sp: 10
stack:
2349452159232
2349453099072
2349453099072
0
2349453099096
2
2349452159328
2349453099096
2349453099112
2349452157248

instr: return

pc: 9
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
0
2349453099096
2349452157248

instr: store

pc: 10
bp: 3
sp: 4
stack:
2349452159232
2349453099072
2349453099072
2349452157248

instr: local 0

pc: 11
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349453099096

instr: load

pc: 12
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248

instr: push 0

pc: 13
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248
0

instr: binOp 0

pc: 14
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248

instr: push 5

pc: 15
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248
5

instr: store

pc: 16
bp: 3
sp: 4
stack:
2349452159232
2349453099072
2349453099072
2349452157248

instr: local 0

pc: 17
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349453099096

instr: load

pc: 18
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248

instr: push 1

pc: 19
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248
1

instr: binOp 0

pc: 20
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157249

instr: push 6

pc: 21
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157249
6

instr: store

pc: 22
bp: 3
sp: 4
stack:
2349452159232
2349453099072
2349453099072
2349452157248

instr: local 0

pc: 23
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349453099096

instr: load

pc: 24
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248

instr: push 0

pc: 25
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248
0

instr: binOp 0

pc: 26
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248

instr: load

pc: 27
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
1541

instr: addr 50

pc: 28
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
2349452157248
1541
2349452159984

instr: call 1

pc: 50
bp: 8
sp: 8
stack:
2349452159232
2349453099072
2349453099072
2349452157248
1541
2349452159648
2349453099096
2349453099104

instr: local -4

pc: 51
bp: 8
sp: 9
stack:
2349452159232
2349453099072
2349453099072
2349452157248
1541
2349452159648
2349453099096
2349453099104
2349453099104

instr: load

pc: 52
bp: 8
sp: 9
stack:
2349452159232
2349453099072
2349453099072
2349452157248
1541
2349452159648
2349453099096
2349453099104
1541

instr: print

> 
pc: 53
bp: 8
sp: 8
stack:
2349452159232
2349453099072
2349453099072
2349452157248
1541
2349452159648
2349453099096
2349453099104

instr: push 0

pc: 54
bp: 8
sp: 9
stack:
2349452159232
2349453099072
2349453099072
2349452157248
1541
2349452159648
2349453099096
2349453099104
0

instr: return

pc: 29
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
0

instr: pop

pc: 30
bp: 3
sp: 4
stack:
2349452159232
2349453099072
2349453099072
2349452157248

instr: local 0

pc: 31
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349453099096

instr: load

pc: 32
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248

instr: push 1

pc: 33
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157248
1

instr: binOp 0

pc: 34
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
2349452157249

instr: load

pc: 35
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
6

instr: addr 50

pc: 36
bp: 3
sp: 6
stack:
2349452159232
2349453099072
2349453099072
2349452157248
6
2349452159984

instr: call 1

pc: 50
bp: 8
sp: 8
stack:
2349452159232
2349453099072
2349453099072
2349452157248
6
2349452159776
2349453099096
2349453099104

instr: local -4

pc: 51
bp: 8
sp: 9
stack:
2349452159232
2349453099072
2349453099072
2349452157248
6
2349452159776
2349453099096
2349453099104
2349453099104

instr: load

pc: 52
bp: 8
sp: 9
stack:
2349452159232
2349453099072
2349453099072
2349452157248
6
2349452159776
2349453099096
2349453099104
6

instr: print

> 
pc: 53
bp: 8
sp: 8
stack:
2349452159232
2349453099072
2349453099072
2349452157248
6
2349452159776
2349453099096
2349453099104

instr: push 0

pc: 54
bp: 8
sp: 9
stack:
2349452159232
2349453099072
2349453099072
2349452157248
6
2349452159776
2349453099096
2349453099104
0

instr: return

pc: 37
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
0

instr: pop

pc: 38
bp: 3
sp: 4
stack:
2349452159232
2349453099072
2349453099072
2349452157248

instr: push 0

pc: 39
bp: 3
sp: 5
stack:
2349452159232
2349453099072
2349453099072
2349452157248
0

instr: return

pc: 3
bp: 0
sp: 1
stack:
0

instr: exit


Program return code:

0
